import{h as t,_ as e,a as o,L as n,P as r,g as a,M as i,b as c}from"./index.browser-34fc29f5.js";import s from"react";import{renderToStaticMarkup as l}from"react-dom/server";import"camelcase";import"prop-types";let d;const u=new WeakMap,m=navigator.connection||navigator.mozConnection||navigator.webkitConnection,g=["image","loading","isLoading","isLoaded","imgClassName","imgStyle","objectPosition","backgroundColor","objectFit"];function b(t,e){t.style.opacity="1",e&&(e.style.opacity="0")}function h(t,e,o,n,r,a){const i=t.querySelector("[data-main-image]"),c=t.querySelector("[data-placeholder-image]"),s=o.has(e);function l(t){this.removeEventListener("load",l);const e=t.currentTarget,o=new Image;o.src=e.currentSrc,o.decode?o.decode().then(()=>{b(this,c),null==r||r({wasCached:s})}).catch(t=>{b(this,c),null==a||a(t)}):(b(this,c),null==r||r({wasCached:s}))}return i.addEventListener("load",l),null==n||n({wasCached:s}),Array.from(i.parentElement.children).forEach(t=>{const e=t.getAttribute("data-src"),o=t.getAttribute("data-srcset");e&&(t.removeAttribute("data-src"),t.setAttribute("src",e)),o&&(t.removeAttribute("data-srcset"),t.setAttribute("srcset",o))}),o.add(e),i.complete&&l.call(i,{currentTarget:i}),()=>{i&&i.removeEventListener("load",l)}}function f(e,o,n,r,a,i,c){if(!t()){let t;const b=(g=()=>{t=h(e,o,n,a,i,c)},"IntersectionObserver"in window?(d||(d=new IntersectionObserver(t=>{t.forEach(t=>{var e;t.isIntersecting&&(null==(e=u.get(t.target))||e(),u.delete(t.target))})},{rootMargin:"4g"!==(null==m?void 0:m.effectiveType)||null!=m&&m.saveData?"2500px":"1250px"})),function(t){return u.set(t,g),d.observe(t),function(){d&&t&&(u.delete(t),d.unobserve(t))}}):function(){return g(),function(){}}),f=b(e);var s,l;return"objectFit"in document.documentElement.style||(e.dataset.objectFit=null!=(s=r.objectFit)?s:"cover",e.dataset.objectPosition=`${null!=(l=r.objectPosition)?l:"50% 50%"}`,async function(t){"objectFitPolyfill"in window||await import("objectFitPolyfill"),window.objectFitPolyfill(t)}(e)),()=>{t&&t(),f()}}var g;return h(e,o,n,a,i,c)}function v(t){let{image:d,loading:u="lazy",isLoading:m,isLoaded:b,imgClassName:h,imgStyle:f={},objectPosition:v,backgroundColor:p,objectFit:y="cover"}=t,w=e(t,g);const{width:j,height:C,layout:E,images:F,placeholder:P,backgroundColor:L}=d;return f=o({objectFit:y,objectPosition:v,backgroundColor:p},f),l(s.createElement(n,{layout:E,width:j,height:C},s.createElement(r,o({},a(P,b,E,j,C,L,y,v))),s.createElement(i,o({},w,{width:j,height:C,className:h},c(m,b,F,u,f)))))}export{v as renderImageToString,f as swapPlaceholderImage};
//# sourceMappingURL=lazy-hydrate-a50dcbfc.js.map
